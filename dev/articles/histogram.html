<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Histogram Plots • ospsuite.plots</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Histogram Plots">
<meta name="robots" content="noindex">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ospsuite.plots</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.0.0.9003</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-plot-functions" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Plot Functions</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-plot-functions">
<li><a class="dropdown-item" href="../plot-time-profile">Time Profile Plots</a></li>
    <li><a class="dropdown-item" href="../histogram">Histograms</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Histogram Plots</h1>
            
      

      <div class="d-none name"><code>histogram.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">1. Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This vignette documents and illustrates workflows for producing
histograms using the function <code>plotHistogram</code> from the
<code>ospsuite.plots</code> package.</p>
<div class="section level3">
<h3 id="setup">1.1 Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h3>
<p>This vignette uses the <code>{ospsuite.plots}</code> and
<a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a> libraries. We will use the default settings of
<code>{ospsuite.plots}</code> (see vignette(“ospsuite.plots”, package =
“ospsuite.plots”)) but will adjust the legend position.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">ospsuite.plots</span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: ggplot2</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Set Defaults</span></span>
<span><span class="va">oldDefaults</span> <span class="op">&lt;-</span> <span class="fu">ospsuite.plots</span><span class="fu">::</span><span class="fu"><a href="../reference/setDefaults.html">setDefaults</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Place default legend position above the plot for clearer histogram plots</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/get_theme.html" class="external-link">theme_update</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"top"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/get_theme.html" class="external-link">theme_update</a></span><span class="op">(</span>legend.direction <span class="op">=</span> <span class="st">"horizontal"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/get_theme.html" class="external-link">theme_update</a></span><span class="op">(</span>legend.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-data">1.2 Example Data<a class="anchor" aria-label="anchor" href="#example-data"></a>
</h3>
<p>This vignette uses the following datasets:</p>
<ul>
<li>
<strong>Data Set 1</strong>:</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">histData</span> <span class="op">&lt;-</span> <span class="va">exampleDataCovariates</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">SetID</span> <span class="op">==</span> <span class="st">"DataSet1"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ID"</span>, <span class="st">"Sex"</span>, <span class="st">"Age"</span>, <span class="st">"AgeBin"</span>, <span class="st">"Ratio"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Metadata</span></span>
<span><span class="va">metaData</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">exampleDataCovariates</span>, <span class="st">"metaData"</span><span class="op">)</span></span>
<span><span class="va">metaData</span> <span class="op">&lt;-</span> <span class="va">metaData</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/sets.html" class="external-link">intersect</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">histData</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">metaData</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">histData</span><span class="op">)</span>, digits <span class="op">=</span> <span class="fl">2</span>, caption <span class="op">=</span> <span class="st">"First rows of example data."</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>First rows of example data.</caption>
<thead><tr class="header">
<th align="right">ID</th>
<th align="left">Sex</th>
<th align="right">Age</th>
<th align="left">AgeBin</th>
<th align="right">Ratio</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">Male</td>
<td align="right">48</td>
<td align="left">Adults</td>
<td align="right">0.72</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">Male</td>
<td align="right">36</td>
<td align="left">Adults</td>
<td align="right">1.31</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">Male</td>
<td align="right">52</td>
<td align="left">Adults</td>
<td align="right">0.96</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">Male</td>
<td align="right">47</td>
<td align="left">Adults</td>
<td align="right">0.81</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="left">Male</td>
<td align="right">0</td>
<td align="left">Peds</td>
<td align="right">2.69</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="left">Male</td>
<td align="right">48</td>
<td align="left">Adults</td>
<td align="right">2.16</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="../reference/metaData2DataFrame.html">metaData2DataFrame</a></span><span class="op">(</span><span class="va">metaData</span><span class="op">)</span>, digits <span class="op">=</span> <span class="fl">2</span>, caption <span class="op">=</span> <span class="st">"List of meta data"</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>List of meta data</caption>
<thead><tr class="header">
<th align="left"></th>
<th align="left">Age</th>
<th align="left">Ratio</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">dimension</td>
<td align="left">Age</td>
<td align="left">Ratio</td>
</tr>
<tr class="even">
<td align="left">unit</td>
<td align="left">yrs</td>
<td align="left"></td>
</tr>
</tbody>
</table>
<ul>
<li>
<strong>Data Set 2</strong>:</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">histDataDistr</span> <span class="op">&lt;-</span> <span class="va">exampleDataCovariates</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">SetID</span> <span class="op">==</span> <span class="st">"DataSet2"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ID"</span>, <span class="st">"AgeBin"</span>, <span class="st">"Sex"</span>, <span class="st">"Obs"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Metadata for Distribution Data</span></span>
<span><span class="va">metaDataDistr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">exampleDataCovariates</span>, <span class="st">"metaData"</span><span class="op">)</span></span>
<span><span class="va">metaDataDistr</span> <span class="op">&lt;-</span> <span class="va">metaDataDistr</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/sets.html" class="external-link">intersect</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">histDataDistr</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">metaDataDistr</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">histDataDistr</span><span class="op">)</span>, digits <span class="op">=</span> <span class="fl">2</span>, caption <span class="op">=</span> <span class="st">"First rows of distribution data."</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>First rows of distribution data.</caption>
<thead><tr class="header">
<th align="right">ID</th>
<th align="left">AgeBin</th>
<th align="left">Sex</th>
<th align="right">Obs</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="left">adult</td>
<td align="left">Female</td>
<td align="right">28.81</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="left">adult</td>
<td align="left">Male</td>
<td align="right">77.48</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="left">adult</td>
<td align="left">Female</td>
<td align="right">35.86</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="left">adult</td>
<td align="left">Male</td>
<td align="right">62.71</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="left">adult</td>
<td align="left">Female</td>
<td align="right">30.48</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="left">adult</td>
<td align="left">Male</td>
<td align="right">74.24</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu"><a href="../reference/metaData2DataFrame.html">metaData2DataFrame</a></span><span class="op">(</span><span class="va">metaDataDistr</span><span class="op">)</span>, digits <span class="op">=</span> <span class="fl">2</span>, caption <span class="op">=</span> <span class="st">"List of meta data for distribution data"</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>List of meta data for distribution data</caption>
<thead><tr class="header">
<th align="left"></th>
<th align="left">Obs</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">dimension</td>
<td align="left">Clearance</td>
</tr>
<tr class="even">
<td align="left">unit</td>
<td align="left">dL/h/kg</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="examples">2. Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<div class="section level3">
<h3 id="illustration-of-basic-histograms">2.1 Illustration of Basic Histograms<a class="anchor" aria-label="anchor" href="#illustration-of-basic-histograms"></a>
</h3>
<div class="section level4">
<h4 id="basic-example">2.1.1 Basic Example<a class="anchor" aria-label="anchor" href="#basic-example"></a>
</h4>
<p>Histogram of the “Ratio” column mapped to <code>x</code>, stratified
by the “Sex” column mapped to <code>fill</code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plotHistogram.html">plotHistogram</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">histData</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Ratio</span>, fill <span class="op">=</span> <span class="va">Sex</span><span class="op">)</span>,</span>
<span>  metaData <span class="op">=</span> <span class="va">metaData</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="histogram_files/figure-html/minimal-example-default-1.png" alt="Histogram showing the distribution of ratio values stratified by sex. The overlapping histograms use different fill colors for male and female groups, with semi-transparent bars allowing visualization of overlapping distributions." width="80%" style="display: block; margin: auto;"></p>
</div>
<div class="section level4">
<h4 id="basic-example-change-of-defaults">2.1.2 Basic Example: Change of Defaults<a class="anchor" aria-label="anchor" href="#basic-example-change-of-defaults"></a>
</h4>
<p>The variable <code>geomHistAttributes</code> is set by default to
<code>getDefaultGeomAttributes("Hist")</code>, which is a list with
entries <code>bins = 10</code> and
<code>position = ggplot2::position_nudge()</code>.</p>
<p>In the example below, the variable <code>geomHistAttributes</code> is
set to a list with entry <code>position = "dodge"</code>. This changes
the position, but note that the default value of
<code>geomHistAttributes</code> contains the entry
<code>bins = 10</code>, which is now overwritten, and the default
<code>{ggplot}</code> number of 30 is used.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plotHistogram.html">plotHistogram</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">histData</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Ratio</span>, groupby <span class="op">=</span> <span class="va">Sex</span><span class="op">)</span>,</span>
<span>  metaData <span class="op">=</span> <span class="va">metaData</span>,</span>
<span>  geomHistAttributes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>position <span class="op">=</span> <span class="st">"dodge"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="histogram_files/figure-html/minimal-example-position-1.png" alt="Histogram showing ratio distribution with dodge positioning. The histograms for male and female groups are positioned side-by-side rather than overlapping, making it easier to compare the distributions. Note the increased number of bins (30) due to ggplot defaults." width="80%" style="display: block; margin: auto;"></p>
</div>
<div class="section level4">
<h4 id="basic-example-change-of-position-but-keep-number-of-bins">2.1.3 Basic Example: Change of Position but Keep Number of Bins<a class="anchor" aria-label="anchor" href="#basic-example-change-of-position-but-keep-number-of-bins"></a>
</h4>
<p>To preserve the default settings, we modified the variable with
<code>utils::modifyList(getDefaultGeomAttributes("Hist"), list(position = "stack"))</code>.
This changes the position but preserves the number of bins.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plotHistogram.html">plotHistogram</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">histData</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Ratio</span>, groupby <span class="op">=</span> <span class="va">Sex</span><span class="op">)</span>,</span>
<span>  metaData <span class="op">=</span> <span class="va">metaData</span>,</span>
<span>  geomHistAttributes <span class="op">=</span> <span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/modifyList.html" class="external-link">modifyList</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/getDefaultGeomAttributes.html">getDefaultGeomAttributes</a></span><span class="op">(</span><span class="st">"Hist"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>position <span class="op">=</span> <span class="st">"stack"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="histogram_files/figure-html/minimal-example-stack-1.png" alt="Histogram showing ratio distribution with stacked positioning. The histograms for male and female groups are stacked on top of each other, preserving the default bin count (10) while showing the contribution of each sex to the total distribution in each bin." width="80%" style="display: block; margin: auto;"></p>
</div>
<div class="section level4">
<h4 id="basic-example-overlay-of-histograms">2.1.4 Basic Example: Overlay of Histograms<a class="anchor" aria-label="anchor" href="#basic-example-overlay-of-histograms"></a>
</h4>
<p>By setting the position to <code>identity</code> and setting
<code>alpha</code> to a value below 1, an overlay of histograms is
produced.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plotHistogram.html">plotHistogram</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">histData</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Ratio</span>, fill <span class="op">=</span> <span class="va">Sex</span><span class="op">)</span>,</span>
<span>  metaData <span class="op">=</span> <span class="va">metaData</span>,</span>
<span>  geomHistAttributes <span class="op">=</span> <span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/modifyList.html" class="external-link">modifyList</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/getDefaultGeomAttributes.html">getDefaultGeomAttributes</a></span><span class="op">(</span><span class="st">"Hist"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>position <span class="op">=</span> <span class="st">"identity"</span>, binwidth <span class="op">=</span> <span class="fl">1</span>, alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="histogram_files/figure-html/minimal-example-overlay-1.png" alt="Histogram showing ratio distribution with overlapping semi-transparent bars. Male and female distributions are overlaid with 50% transparency (alpha=0.5) and fixed bin width, allowing direct comparison of distribution shapes while showing overlap regions." width="80%" style="display: block; margin: auto;"></p>
</div>
<div class="section level4">
<h4 id="omit-data-points-flagged-as-missing-dependent-variable-mdv">2.1.5 Omit Data Points Flagged as Missing Dependent Variable
(MDV)<a class="anchor" aria-label="anchor" href="#omit-data-points-flagged-as-missing-dependent-variable-mdv"></a>
</h4>
<p>If some of the data should be omitted, we can do this by mapping a
boolean to the aesthetic <code>mdv</code>. Below, we exclude data above
the value of 4:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plotHistogram.html">plotHistogram</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">histData</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Ratio</span>, fill <span class="op">=</span> <span class="va">Sex</span>, mdv <span class="op">=</span> <span class="va">Ratio</span> <span class="op">&gt;</span> <span class="fl">4</span><span class="op">)</span>,</span>
<span>  metaData <span class="op">=</span> <span class="va">metaData</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="histogram_files/figure-html/minimal-example-mdv-1.png" alt="Histogram showing ratio distribution with missing dependent variable (MDV) exclusion. Data points with ratio values greater than 4 are excluded from the analysis, demonstrating how to filter out extreme values or outliers during visualization." width="80%" style="display: block; margin: auto;"></p>
</div>
<div class="section level4">
<h4 id="stratified-by-a-combination-of-columns">2.1.6 Stratified by a Combination of Columns<a class="anchor" aria-label="anchor" href="#stratified-by-a-combination-of-columns"></a>
</h4>
<p>To stratify by a combination of columns, use the function
<code>interaction</code> for the mapping to <code>groupby</code>:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plotHistogram.html">plotHistogram</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">histData</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Ratio</span>, groupby <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/interaction.html" class="external-link">interaction</a></span><span class="op">(</span><span class="va">Sex</span>, <span class="va">AgeBin</span>, sep <span class="op">=</span> <span class="st">"-"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  geomHistAttributes <span class="op">=</span> <span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/modifyList.html" class="external-link">modifyList</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/getDefaultGeomAttributes.html">getDefaultGeomAttributes</a></span><span class="op">(</span><span class="st">"Hist"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>position <span class="op">=</span> <span class="st">"dodge"</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  metaData <span class="op">=</span> <span class="va">metaData</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="histogram_files/figure-html/minimal-example-interaction-1.png" alt="Histogram showing ratio distribution stratified by the interaction of sex and age bin. Each combination of sex and age group is shown as a separate histogram with dodge positioning, creating multiple side-by-side distributions for detailed demographic analysis." width="80%" style="display: block; margin: auto;"></p>
</div>
<div class="section level4">
<h4 id="customization-of-binning">2.1.7 Customization of Binning<a class="anchor" aria-label="anchor" href="#customization-of-binning"></a>
</h4>
<p>Use the input variable <code>geomHistAttributes</code> to change the
binning. The entries of this list are passed to
<code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html" class="external-link">ggplot2::geom_histogram</a></code>, which provides many possibilities
to customize the binning. Below, we define the bin boundaries by adding
the entry <code>breaks</code> to <code>geomHistAttributes</code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plotHistogram.html">plotHistogram</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">histData</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Ratio</span>, fill <span class="op">=</span> <span class="va">Sex</span><span class="op">)</span>,</span>
<span>  geomHistAttributes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_nudge.html" class="external-link">position_nudge</a></span><span class="op">(</span><span class="op">)</span>, breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">5</span>, <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  metaData <span class="op">=</span> <span class="va">metaData</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="histogram_files/figure-html/minimal-example-binboundaries-1.png" alt="Histogram showing ratio distribution with custom bin boundaries. Bins are defined at 0.5-unit intervals from 0 to 5, providing fine-grained resolution for the distribution analysis. Histograms are stratified by sex with overlapping semi-transparent bars." width="80%" style="display: block; margin: auto;"></p>
<p>You could also map a binning function to the aesthetic
<code>x</code>. Below, <code><a href="https://ggplot2.tidyverse.org/reference/cut_interval.html" class="external-link">ggplot2::cut_number</a></code> is used to
create 3 bins with equal numbers of observations. The data is now
displayed as categorical data.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plotHistogram.html">plotHistogram</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">histData</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/cut_interval.html" class="external-link">cut_number</a></span><span class="op">(</span><span class="va">Ratio</span>, n <span class="op">=</span> <span class="fl">3</span>, labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"low"</span>, <span class="st">"mean"</span>, <span class="st">"high"</span><span class="op">)</span><span class="op">)</span>, fill <span class="op">=</span> <span class="va">Sex</span><span class="op">)</span>,</span>
<span>  geomHistAttributes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_nudge.html" class="external-link">position_nudge</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  metaData <span class="op">=</span> <span class="va">metaData</span></span>
<span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Ratio"</span><span class="op">)</span></span></code></pre></div>
<p><img src="histogram_files/figure-html/minimal-example-binfunction-1.png" alt="Histogram showing ratio distribution using quantile-based binning. Data is divided into three equal-frequency bins labeled as 'low', 'mean', and 'high', transforming continuous data into categorical representation. Bars are stratified by sex." width="80%" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level3">
<h3 id="frequency">2.2 Frequency<a class="anchor" aria-label="anchor" href="#frequency"></a>
</h3>
<p>If the variable <code>plotAsFrequency</code> is set to TRUE and:</p>
<ul>
<li>
<code>position</code> is <code>stack</code>: frequency is calculated
as count per bin / total (A)</li>
<li>
<code>position</code> is NOT <code>stack</code>: frequency is
calculated as count per bin / per group (B)</li>
</ul>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># A</span></span>
<span><span class="fu"><a href="../reference/plotHistogram.html">plotHistogram</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">histData</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Ratio</span>, groupby <span class="op">=</span> <span class="va">Sex</span><span class="op">)</span>,</span>
<span>  metaData <span class="op">=</span> <span class="va">metaData</span>,</span>
<span>  plotAsFrequency <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  geomHistAttributes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>bins <span class="op">=</span> <span class="fl">10</span>, position <span class="op">=</span> <span class="st">"stack"</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>tag <span class="op">=</span> <span class="st">"A"</span>, caption <span class="op">=</span> <span class="st">"Frequency is calculated as count per bin / total"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># B</span></span>
<span><span class="fu"><a href="../reference/plotHistogram.html">plotHistogram</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">histData</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Ratio</span>, groupby <span class="op">=</span> <span class="va">Sex</span><span class="op">)</span>,</span>
<span>  metaData <span class="op">=</span> <span class="va">metaData</span>,</span>
<span>  plotAsFrequency <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>tag <span class="op">=</span> <span class="st">"B"</span>, caption <span class="op">=</span> <span class="st">"Frequency is calculated as count per bin / per group"</span><span class="op">)</span></span></code></pre></div>
<p><img src="histogram_files/figure-html/examples-frequency-1.png" alt="Two histograms (A and B) showing frequency calculations with different positioning. Plot A shows stacked histograms where frequency is calculated as count per bin divided by total sample size. Plot B shows side-by-side histograms where frequency is calculated as count per bin divided by group size." width="80%" style="display: block; margin: auto;"><img src="histogram_files/figure-html/examples-frequency-2.png" alt="Two histograms (A and B) showing frequency calculations with different positioning. Plot A shows stacked histograms where frequency is calculated as count per bin divided by total sample size. Plot B shows side-by-side histograms where frequency is calculated as count per bin divided by group size." width="80%" style="display: block; margin: auto;"></p>
<p>Both plots could also be calculated by directly setting
<code>y</code> in the mapping:</p>
<ul>
<li>
<code>position</code> is <code>stack</code>: frequency is calculated
as count per bin / total (C)</li>
<li>
<code>position</code> is NOT <code>stack</code>: frequency is
calculated as count per bin / per group (D)</li>
</ul>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># C</span></span>
<span><span class="fu"><a href="../reference/plotHistogram.html">plotHistogram</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">histData</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Ratio</span>, fill <span class="op">=</span> <span class="va">Sex</span>, y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes_eval.html" class="external-link">after_stat</a></span><span class="op">(</span><span class="va">count</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">count</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  metaData <span class="op">=</span> <span class="va">metaData</span>,</span>
<span>  plotAsFrequency <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  geomHistAttributes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>bins <span class="op">=</span> <span class="fl">10</span>, position <span class="op">=</span> <span class="st">"stack"</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>tag <span class="op">=</span> <span class="st">"C"</span>, caption <span class="op">=</span> <span class="st">"Frequency is calculated as count per bin / total"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># D</span></span>
<span><span class="fu"><a href="../reference/plotHistogram.html">plotHistogram</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">histData</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Ratio</span>, fill <span class="op">=</span> <span class="va">Sex</span>, y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes_eval.html" class="external-link">after_stat</a></span><span class="op">(</span><span class="va">density</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  metaData <span class="op">=</span> <span class="va">metaData</span>,</span>
<span>  plotAsFrequency <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>tag <span class="op">=</span> <span class="st">"D"</span>, caption <span class="op">=</span> <span class="st">"Frequency is calculated as count per bin / per group"</span><span class="op">)</span></span></code></pre></div>
<p><img src="histogram_files/figure-html/examples-frequency-manual-1.png" alt="Two histograms (C and D) demonstrating manual frequency calculations using ggplot2 after_stat functions. Plot C uses stacked positioning with manual count/sum calculation, while Plot D uses density calculation for group-wise normalization." width="80%" style="display: block; margin: auto;"><img src="histogram_files/figure-html/examples-frequency-manual-2.png" alt="Two histograms (C and D) demonstrating manual frequency calculations using ggplot2 after_stat functions. Plot C uses stacked positioning with manual count/sum calculation, while Plot D uses density calculation for group-wise normalization." width="80%" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level2">
<h2 id="distribution-fit">3. Distribution Fit<a class="anchor" aria-label="anchor" href="#distribution-fit"></a>
</h2>
<p>The optional input variable <code>distribution</code> provides the
possibility of fitting the data distribution. All distributions from the
package <code>{stats}</code> are available (see
<code><a href="https://rdrr.io/r/stats/Distributions.html" class="external-link">?stats::distributions</a></code>). Internally,
<code><a href="https://teunbrand.github.io/ggh4x/reference/stat_theodensity.html" class="external-link">ggh4x::stat_theodensity</a></code> is used for the fit. Check the help
for more details.</p>
<p>For the most common distributions, the keys “normal” (instead of
<code>norm</code>) and “lognormal” (instead of <code>lnorm</code>) are
also accepted.</p>
<p>The vertical line indicates the mean. The function to calculate the
mean is determined by the input variable <code>meanFunction</code>.
Available options are:</p>
<ul>
<li>
<code>none</code> (no line is plotted)</li>
<li>
<code>mean</code> (arithmetic mean)</li>
<li>
<code>geomean</code> (geometric mean)</li>
<li><code>median</code></li>
<li>
<code>auto</code> (default, selects the mean function according to
the selected distribution)</li>
</ul>
<p>Below are examples for:</p>
<div class="section level4">
<h4 id="fit-of-a-normal-distribution-with-mean-as-vertical-line">3.1 Fit of a Normal Distribution with Mean as Vertical Line<a class="anchor" aria-label="anchor" href="#fit-of-a-normal-distribution-with-mean-as-vertical-line"></a>
</h4>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Plot normal distribution</span></span>
<span><span class="fu"><a href="../reference/plotHistogram.html">plotHistogram</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">histDataDistr</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Obs</span>, fill <span class="op">=</span> <span class="va">Sex</span><span class="op">)</span>,</span>
<span>  metaData <span class="op">=</span> <span class="va">metaDataDistr</span>,</span>
<span>  distribution <span class="op">=</span> <span class="st">"normal"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="histogram_files/figure-html/example-distribution-1.png" alt="Histogram showing distribution fit with normal distribution overlay. The histogram displays observed values by sex with fitted normal distribution curves overlaid and a vertical line indicating the mean. This demonstrates automatic distribution fitting capabilities." width="80%" style="display: block; margin: auto;"></p>
</div>
<div class="section level4">
<h4 id="fit-of-a-chi-squared-distribution-without-vertical-line">3.2 Fit of a Chi-Squared Distribution without Vertical Line<a class="anchor" aria-label="anchor" href="#fit-of-a-chi-squared-distribution-without-vertical-line"></a>
</h4>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plotHistogram.html">plotHistogram</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">histDataDistr</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Obs</span>, groupby <span class="op">=</span> <span class="va">Sex</span><span class="op">)</span>,</span>
<span>  metaData <span class="op">=</span> <span class="va">metaDataDistr</span>,</span>
<span>  distribution <span class="op">=</span> <span class="st">"chisq"</span>,</span>
<span>  meanFunction <span class="op">=</span> <span class="st">"none"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="histogram_files/figure-html/example-distribution-chisq-1.png" alt="Histogram showing chi-squared distribution fit without mean line. The histogram displays observed values grouped by sex with fitted chi-squared distribution curves overlaid, demonstrating how to disable the mean line indicator using meanFunction = 'none'." width="80%" style="display: block; margin: auto;"></p>
</div>
<div class="section level4">
<h4 id="fit-of-stacked-data">3.3 Fit of Stacked Data<a class="anchor" aria-label="anchor" href="#fit-of-stacked-data"></a>
</h4>
<p>With the option <code>stack</code>, it is also possible to get the
distribution of the sum only.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plotHistogram.html">plotHistogram</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">histData</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Ratio</span>, fill <span class="op">=</span> <span class="va">Sex</span><span class="op">)</span>,</span>
<span>  metaData <span class="op">=</span> <span class="va">metaData</span>,</span>
<span>  geomHistAttributes <span class="op">=</span> <span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/modifyList.html" class="external-link">modifyList</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/getDefaultGeomAttributes.html">getDefaultGeomAttributes</a></span><span class="op">(</span><span class="st">"Hist"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>position <span class="op">=</span> <span class="st">"stack"</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  distribution <span class="op">=</span> <span class="st">"normal"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="histogram_files/figure-html/example-stacked-distribution-1.png" alt="Histogram showing stacked distribution fitting. The stacked histogram displays the sum distribution of both sex groups combined, with a single normal distribution curve fitted to the total data rather than individual group distributions." width="80%" style="display: block; margin: auto;"></p>
</div>
<div class="section level4">
<h4 id="fit-with-frequency-true">3.4 Fit with Frequency TRUE<a class="anchor" aria-label="anchor" href="#fit-with-frequency-true"></a>
</h4>
<p>To fit a frequency, select a distribution (here “normal”) and set the
variable <code>plotAsFrequency</code> to TRUE.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plotHistogram.html">plotHistogram</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">histDataDistr</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Obs</span>, fill <span class="op">=</span> <span class="va">Sex</span><span class="op">)</span>,</span>
<span>  metaData <span class="op">=</span> <span class="va">metaDataDistr</span>,</span>
<span>  distribution <span class="op">=</span> <span class="st">"normal"</span>,</span>
<span>  plotAsFrequency <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="histogram_files/figure-html/example-frequency-fit-1.png" alt="Frequency histogram with normal distribution fit. The histogram displays frequency values (normalized counts) on the y-axis with fitted normal distribution curves. The vertical line shows the mean, and the fit is applied to the frequency-scaled data." width="80%" style="display: block; margin: auto;"></p>
</div>
<div class="section level4">
<h4 id="fit-with-frequency-true-and-stacked-data">3.5 Fit with Frequency TRUE and Stacked Data<a class="anchor" aria-label="anchor" href="#fit-with-frequency-true-and-stacked-data"></a>
</h4>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plotHistogram.html">plotHistogram</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">histData</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Ratio</span>, fill <span class="op">=</span> <span class="va">Sex</span><span class="op">)</span>,</span>
<span>  metaData <span class="op">=</span> <span class="va">metaData</span>,</span>
<span>  geomHistAttributes <span class="op">=</span> <span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/modifyList.html" class="external-link">modifyList</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/getDefaultGeomAttributes.html">getDefaultGeomAttributes</a></span><span class="op">(</span><span class="st">"Hist"</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>position <span class="op">=</span> <span class="st">"stack"</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  distribution <span class="op">=</span> <span class="st">"normal"</span>,</span>
<span>  plotAsFrequency <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="histogram_files/figure-html/example-frequency-stacked-fit-1.png" alt="Frequency histogram with stacked positioning and normal distribution fit. The stacked frequency histogram combines both sex groups with frequency scaling, and a single normal distribution is fitted to the combined frequency data." width="80%" style="display: block; margin: auto;"></p>
</div>
<div class="section level4">
<h4 id="x-axis-on-log-scale-for-distribution-fit">3.6 X-Axis on Log Scale for Distribution Fit<a class="anchor" aria-label="anchor" href="#x-axis-on-log-scale-for-distribution-fit"></a>
</h4>
<p>As the fit is based on binning, and binning is dependent on scale, a
log scale has to be set before the distribution fit. Please use the
variable <code>xscale = 'log'</code> and do not add a
<code>{ggplot}</code> like <code>scale_x_log10</code>.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plotHistogram.html">plotHistogram</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">histDataDistr</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Obs</span>, fill <span class="op">=</span> <span class="va">Sex</span><span class="op">)</span>,</span>
<span>  metaData <span class="op">=</span> <span class="va">metaDataDistr</span>,</span>
<span>  xscale <span class="op">=</span> <span class="st">"log"</span>,</span>
<span>  distribution <span class="op">=</span> <span class="st">"norm"</span>,</span>
<span>  meanFunction <span class="op">=</span> <span class="st">"none"</span></span>
<span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>tag <span class="op">=</span> <span class="st">"A"</span><span class="op">)</span></span></code></pre></div>
<p><img src="histogram_files/figure-html/example-logscale-1.png" alt="Histogram with logarithmic x-axis scale and normal distribution fit. The log-scaled histogram shows observed values by sex with distribution fitting applied after log transformation. No mean line is displayed due to meanFunction = 'none' setting." width="80%" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level2">
<h2 id="histogram-for-categorical-data">4. Histogram for Categorical Data<a class="anchor" aria-label="anchor" href="#histogram-for-categorical-data"></a>
</h2>
<p>The function <code>plotHistogram</code> can also be used to plot
categorical data with a bar plot. Internally, the function switches from
<code>geom_histogram</code> to <code>geom_bar</code>. With default
inputs, the function switches automatically to a bar plot if the data is
a factor or non-numeric. (See plot A). It can also be done manually by
setting the variable <code>asBarPlot</code> to TRUE (see plot B).</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># A Input is factor</span></span>
<span><span class="fu"><a href="../reference/plotHistogram.html">plotHistogram</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">histData</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">AgeBin</span>, fill <span class="op">=</span> <span class="va">Sex</span><span class="op">)</span>,</span>
<span>  metaData <span class="op">=</span> <span class="va">metaData</span></span>
<span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>tag <span class="op">=</span> <span class="st">"A"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># B Set asBarPlot = TRUE to convert input to factor</span></span>
<span><span class="fu"><a href="../reference/plotHistogram.html">plotHistogram</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">histData</span>,</span>
<span>  mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">histData</span><span class="op">$</span><span class="va">Age</span> <span class="op">/</span> <span class="fl">10</span><span class="op">)</span> <span class="op">*</span> <span class="fl">10</span>, fill <span class="op">=</span> <span class="va">Sex</span><span class="op">)</span>,</span>
<span>  asBarPlot <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  metaData <span class="op">=</span> <span class="va">metaData</span></span>
<span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Age rounded to 10 years"</span>, tag <span class="op">=</span> <span class="st">"B"</span><span class="op">)</span></span></code></pre></div>
<p><img src="histogram_files/figure-html/example-categorical-data-1.png" alt="Two bar plots (A and B) showing categorical data visualization. Plot A shows age bins as factor data with automatic bar plot detection. Plot B demonstrates manual bar plot creation by setting asBarPlot = TRUE and rounding age values to 10-year intervals. Both plots are stratified by sex." width="80%" style="display: block; margin: auto;"><img src="histogram_files/figure-html/example-categorical-data-2.png" alt="Two bar plots (A and B) showing categorical data visualization. Plot A shows age bins as factor data with automatic bar plot detection. Plot B demonstrates manual bar plot creation by setting asBarPlot = TRUE and rounding age values to 10-year intervals. Both plots are stratified by sex." width="80%" style="display: block; margin: auto;"></p>
<p>```</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Katrin Coboeken.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
